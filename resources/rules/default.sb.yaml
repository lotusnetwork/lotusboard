log:
  level: info
  timestamp: true
dns:
  servers:
    - tag: dns_proxy
      address: https://1.1.1.1/dns-query
      address_resolver: dns_direct
      strategy: ipv4_only
      detour: select
    - tag: dns_direct
      address: https://223.5.5.5/dns-query
      strategy: ipv4_only
      detour: direct
    - tag: dns_block
      address: rcode://success
  rules:
    - geosite:
        - cn
        - private
      server: dns_direct
    - outbound:
        - any
      server: dns_direct
route:
  geoip:
    download_url: https://github.com/soffchen/sing-geoip/releases/latest/download/geoip.db
  geosite:
    download_url: https://github.com/soffchen/sing-geosite/releases/latest/download/geosite.db
  rules:
    - protocol: dns
      outbound: dns-out
    - geosite:
        - geolocation-!cn
      outbound: select
    - geosite:
        - cn
        - private
      outbound: direct
    - geoip:
        - cn
        - private
      outbound: direct
  auto_detect_interface: true
inbounds:
  - type: tun
    tag: tun-in
    inet4_address: 172.19.0.1/30
    inet6_address: fdfe:dcba:9876::1/126
    mtu: 1400
    auto_route: true
    strict_route: true
    stack: gvisor
    sniff: true
    sniff_override_destination: false
outbounds:
  - type: direct
    tag: direct
  - type: block
    tag: block
  - type: dns
    tag: dns-out